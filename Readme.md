# python物理实验计算库

该轮子提供了物理实验中常见的一些数据处理的函数

## set_win()

文档编码为utf-8，该参数用于设置回显中文为GBK（默认）

##set_unix()

用于设置回显中文为utf

## format

**format(input, flag, type=1, num=0)**

对运算结果按照加减乘除规则进行修约

  * input:	待修约数字
  * flag:         采用的修约方式，'*'和/''或0根据有效数字位数修约，'+'和'-'或1根据小数点精度修约
  * num:       指定有效数字/小数点位数，当设置有效数字时输入有效数字位数，设置小数点位数时，如精确到小数点后两位则输入0.01，若为0使用默认set_digit和set_preci设置的精度
  * type：     设置返回值类型

返回值： 若type为1则返回 **float**（默认），否则返回string

注意：为了保证返回值位数正确这里返回的是string，此处的有效数字化简是由Decimal模块实现的，若小数点位数值大于1全部会默认按照1进行化简（即保留0位小数）

## set_digit

**set_digit(num, echo=1)**

设置有效数字

* num:     有效数字位数
* echo:     默认回显

返回值：无

## set_preci

**set_preci(num, echo=1)**

设置精确度

* num:     精确度，最好为0.1的乘方（0.01，0.001）
* echo:     默认回显

返回值：无

## get_preci

**get_preci()**

返回精确到的小数位数

## avr

**avr(num=[], flag=1,echo=1)**

求平均数

* num       list类型，待求的数据

* flag         为1时返回修约后结果，否则返回未修约结果

* echo       是否回显

返回值：**float**

## deviation

**deviation(num=[], flag=1, echo=1)**

求标准差

* num        list类型，待求的数据
* flag          为1时返回修约后结果，否则返回未修约结果
* echo        是否回显

返回值：**float**

## sigmax

**sigmax(num=[], flag=1, echo=1)**

求A类不确定度

* num         list类型，待求数据
* flag           是否对标准差使用置信因子进行修正（默认修正）
* echo         是否回显
  返回值：**float**

## datacheck

**datacheck(num=[], echo=1)**

使用3sigma原则筛值

* num        list类型，待筛数据
* echo       是否回显

返回值：筛完数据后的list



## uncertainty

**uncertainty(data, delta, echo=1)**

求不确定度

* data        list类型，待求数据
* delta       B类不确定度中的仪器不确定度
* echo       是否回显

返回值：**float**

## least_square

**least_squre(x, y)**

最小二乘法

* x             list类型，最小二乘的x值
* y             list类型，最小二乘的y值

返回值：[k,b]，k为斜率b为截距

#注意：

* 这套代码是上学期刚做物理实验的时候老师讲了一堆繁琐的数据处理，脑抽花了大概一晚上写的，当时就有整理一下开源的想法但没什么时间，今天刚好有空又花了一晚上重新写了下format函数，改了下回显和之前因为编码而导致的一些乱码，但是对当时具体的计算过程也有点忘了，因此可能会有bug
* 此处B类不确定度只考虑了仪器不确定度，即直接使用 △仪 / 根号3 计算，若教材有公式请使用sigmax函数与B类不确定度公式进行计算
* **感觉处理有效数字上还是有点问题**


#关于example

example写了两个示例

* 一个是最小二乘法的（示例还导入了matplotlib画图）
* 还有一个是牛顿环的实验

其中牛顿环那个实验。。。原文数据各种错

本来我是想拿我去年写实验报告时用的脚本当示例，但是想想那些毕竟无法确定答案的正确性

没想到网上找的也不靠谱  （

其实我上学期为了找bug还专门拍过实验楼的优秀实验报告来验算

仔细看了以后发现。。。也是他们算的有点问题，特别是不确定度这块，我代码里的B类不确定度是直接使用了一般用于测量距离时的 △仪 / 根号3 ， 但像牛顿环实验似乎需要不同的计算B类不确定度的方法（不过老师上次实验的时候并没有说这个）

B类不确定度跟实验有关暂且不说，但A类不确定度的计算方法我也看到过好多种，比如直接用标准差的（比如牛顿环的那篇），有标准差除以根号n的，其实这个问题 [答案](http://tieba.baidu.com/p/5640802899) 很明确

但是书里还提到了数据量小时应乘上置信因子，所以代码中用flag指定是否考虑这一点


**以上只是本人的一些说法，如果有错希望大佬们指正**